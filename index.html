<!DOCTYPE HTML>
<html>

<head>
    <!-- CSS only -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WIFI-Strike</title>
    <style>
        /*!
 * Bootstrap v4.6.1 (https://getbootstrap.com/)
 * Copyright 2011-2021 The Bootstrap Authors
 * Copyright 2011-2021 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
/*# sourceMappingURL=bootstrap.min.css.map */

        html {
            font-family: Arial;
            display: inline-block;
            margin: 0px auto;
            text-align: center;
            background-color: black !important;
            color: white !important;
        }

        .lock {
            transform: scale(0.5);
        }

        .units {
            font-size: 1.2rem;
        }

        .dht-labels {
            font-size: 1.5rem;
            vertical-align: middle;
            padding-bottom: 15px;
        }

        .notSelectedBtn {}

        .selectedBtn {}
    </style>
    <script defer>
        const MAX_TIME_BEFORE_DEAD = 5000;

        const baseURL = `${document.location.host}`;
        const baceAPI = {
            get: (url, headers = {}) => fetch(url, { headers, method: 'GET' }).then(r => r.json()),
            post: (url, headers = {}, body = '') => fetch({ url: `${baseURL + url}`, headers, method: 'POST', body })
        };
        const API = {
            getNearbyNetworks: () => baceAPI.get('/networks'),

        };
        window.addEventListener('load', async (event) => {
            currPage = -1;
            function updatePage(newPage) {
                if (currPage == newPage) return;
                currPage = newPage;
                render();
            };
            function selectTarget(target, type) {
                let currNetwork = type == 'network' ? globalVars.selectedNetwroks : globalVars.selectedClients;
                if (currNetwork.includes(target)) {
                    currNetwork = currNetwork.splice(currNetwork.indexOf(target), 1);
                } else {
                    currNetwork.push(target);
                };
                render();
            };

            const e = {
                tagNet: document.getElementById('tagNet'),
                tagCli: document.getElementById('tagCli')
            };
            const globalVars = {
                selectedClients: [],
                selectedNetwroks: []
            };
            const encriptionTypes = {
                2: { name: "TKIP (WPA)", secure: true },
                5: { name: "WEP", secure: true },
                4: { name: "CCMP (WPA)", secure: true },
                7: { name: "NONE", secure: false },
                8: { name: "AUTO", secure: true }
            };

            pages = Array.from(document.getElementsByClassName('page'));

            function render() {
                console.log('Started render job...');

                e.tagCli.innerHTML = globalVars.selectedClients || "None Selected";
                e.tagNet.innerHTML = globalVars.selectedNetwroks || "None Selected";

                /* Render Header */
                const headerList = document.getElementById('headerList');
                /* Clear header */
                headerList.innerHTML = '';
                for (let index = 0; index < pages.length; index++) {
                    const element = pages[index];
                    li = document.createElement("li");
                    p = document.createElement("a");
                    p.innerHTML = element.id;
                    p.className = `nav-link ${currPage == index ? 'active' : ''}`;
                    p.addEventListener("click", () => updatePage(index));
                    li.appendChild(p);
                    headerList.appendChild(li);
                    if (currPage == index) {
                        document.getElementById(element.id).hidden = false;
                    } else {
                        document.getElementById(element.id).hidden = true;
                    }
                };

                const toolKitBody = document.getElementById('toolKitBody');

                console.log('Started render job finished');
            };

            updatePage(0);

            /* Code for each page
            //Page Networks */

            const networkCache = new Map();

            window.setInterval(async () => {
                if (currPage == 0) {
                    /* const networksRaw = JSON.parse(`[{"SSID":"NETGEAR28_EXT","channel":1,"RSSI":-82,"encryptionType":4,"index":0},{"SSID":"Freddie's room","channel":6,"RSSI":-42,"encryptionType":4,"index":1},{"SSID":"Freddie-Guest","channel":6,"RSSI":-41,"encryptionType":7,"index":2},{"SSID":"VM5115280","channel":11,"RSSI":-76,"encryptionType":8,"index":3},{"SSID":"BTWi-fi","channel":11,"RSSI":-89,"encryptionType":7,"index":4}]`)
                    */ const networksRaw = await API.getNearbyNetworks();

                    networksRaw.forEach((net) => networkCache.set(net.SSID, net) );

                    let networks = Array.from(networkCache.values());

                    /* Order netwroks by connection strrength */
                    networks = networks.sort((a, b) => b.RSSI > a.RSSI);

                    var tbdy = document.getElementById('NetwroksTableBody');
                    tbdy.innerHTML = '';
                    for (var i = 0; i < networks.length; i++) {
                        const ellement = networks[i];
                        var tr = document.createElement('tr');

                        let td = tr.insertCell();
                        td.innerHTML = ellement.SSID;
                        td.scope = "row";

                        td = tr.insertCell();
                        td.innerHTML = ellement.RSSI;

                        td = tr.insertCell();
                        const encryptInfo = encriptionTypes[ellement.encryptionType];
                        const lock = document.getElementById(encriptionTypes[ellement.encryptionType].secure ? 'lockedPadlock' : 'unlockedPadlock').cloneNode(true);
                        lock.removeAttribute('style');
                        td.appendChild(lock);
                        td.appendChild(document.createTextNode(encryptInfo.name));
                        lock.hidden = true;

                        td = tr.insertCell();
                        let btn = document.createElement("button");
                        btn.innerHTML = globalVars.selectedNetwroks.includes(ellement.SSID) ? 'Selected' : 'Select';
                        btn.addEventListener("click", () => selectTarget(ellement.SSID, 'network'));
                        btn.type = 'button';
                        btn.className = globalVars.selectedNetwroks.includes(ellement.SSID) ? 'btn btn-success' : 'btn btn-danger';
                        td.appendChild(btn);
                        tbdy.appendChild(tr);
                    };
                    networks;
                };
            }, 1000);


        });
    </script>
</head>

<body class="dark">
    <h1>WIFI-Strike V0.2.3</h1>
    <p>Developed for penetration testing <strong>it is a criminal offence to use this tool</strong></p>
    <p>Target Network: <strong id="tagNet"></strong></p>
    <p>Target Client: <strong id="tagCli"></strong></p>

    <section id="toolKit">
        <section id="toolKitHeader">
            <ul id="headerList" class="nav nav-tabs">

            </ul>
        </section>

        <section id="toolKitBody">


            <div class="page" id="Networks">
                <h3>Avalable networks</h3>
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <td scope="col">SSID</td>
                            <td scope="col">Strength</td>
                            <td scope="col">Security</td>
                            <td scope="col">Select</td>
                        </tr>
                    </thead>
                    <tbody id="NetwroksTableBody">
                        <tr>
                            <td>
                                <h6>Loading...</h6>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="page" id="Sniffer">
                <h1> Sniffer </h1>
            </div>

            <div class="page" id="Test">
                <h1> Sniffer </h1>
            </div>

            <div class="page" id="DauthAttack">
                <h1> Launch a Deauth attack agaist </h1>
            </div>
        </section>
    </section>

    <svg id="lockedPadlock" class="lock" style="display: none;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8">
        <path
            d="m1 0c-.554 0-1 .446-1 1v6c0 .554.446 1 1 1h6c.554 0 1-.446 1-1v-6c0-.554-.446-1-1-1h-6m3 1.125c.969 0 1.758.787 1.758 1.756v.715c.138.029.242.152.242.299v2.676c0 .168-.136.305-.305.305h-3.391c-.169 0-.305-.136-.305-.305v-2.676c0-.147.104-.27.242-.299v-.715c0-.969.789-1.756 1.758-1.756m0 .611c-.632 0-1.146.513-1.146 1.145v.709h2.293v-.709c0-.632-.515-1.145-1.146-1.145m0 2.793c-.237 0-.43.191-.43.428 0 .126.055.238.141.316l-.113.604c-.006.034.015.059.049.059h.715c.034 0 .055-.025.049-.059l-.115-.609c.082-.078.135-.188.135-.311 0-.237-.193-.428-.43-.428"
            fill="#4d4d4d" />
    </svg>
    <svg id="unlockedPadlock" class="lock" style="display: none;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8">
        <path
            d="m1 0c-.554 0-1 .446-1 1v6c0 .554.446 1 1 1h6c.554 0 1-.446 1-1v-6c0-.554-.446-1-1-1h-6m3 1.125c.791 0 1.488.532 1.695 1.295.044.163-.052.331-.215.375-.163.044-.331-.052-.375-.215-.135-.497-.59-.844-1.105-.844-.632 0-1.146.513-1.146 1.145v.709h2.842c.169 0 .305.136.305.305v2.676c0 .169-.136.305-.305.305h-3.391c-.169 0-.305-.136-.305-.305v-2.676c0-.147.104-.27.242-.299v-.715c0-.969.789-1.756 1.758-1.756m0 3.404c-.237 0-.43.191-.43.428 0 .126.055.238.141.316l-.113.604c-.006.033.015.059.049.059h.715c.034 0 .055-.026.049-.059l-.115-.609c.082-.078.135-.188.135-.311 0-.237-.193-.428-.43-.428"
            fill="#4d4d4d" />
    </svg> </div>


</body>

</html>